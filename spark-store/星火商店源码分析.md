# 目录结构
几个目录结构
```
/
/icons 图标文件夹       
/tags 首页图标      
/tras 多语言翻译        
```

主要的文件分析
```js
spark-store.pro Qt工程配置文件
ssinstall 调用包安装器的脚本
icons.qrc 图标资源文件  
main.cpp 入口文件
widget.h widget.cpp widget.ui 主要窗口控件
downloadlist.h downloadlist.cpp downloadlist.ui 单个软件的下载安装展示控件      
progressload.h progressload.cpp 网页加载显示？ 得在deepin上编译运行才能搞清楚   
workerthreads.h workerthreads.cpp 应用信息加载线程      
image_show.h image_show.cpp 应用页面截图预览控件    
big_image.h big_image.cpp 大图查看控件      
```

# 使用的开源库及第三方工具
* GDebi 一个 Ubuntu 软件中心的轻量级替代品 https://linux.cn/article-4982-1.html
* apt-fast 轻量级的apt-get脚本包装器 https://github.com/ilikenwf/apt-fast       
* Linux系统之rpm仓库搭建 https://www.cnblogs.com/qiuhom-1874/p/11487456.html    
* libnotify 系统通知 https://developer.gnome.org/libnotify/unstable/


# 源码分析
## 应用的组成部分
左侧应用分类菜单
主窗口的下拉菜单
应用列表页面
应用详情页面
应用首页，有几个链接跳转        
商店设置页面
下载列表页面    

## 获取应用详情信息


## 应用下载机制
Widget::on_pushButton_download_clicked() 是点击下载的安装方法。     
最终使用的是 `QNetworkRequest` 进行GET请求获取数据写入文件。        
=_= 源码挺简单的，但是我没那个编程思维所以做不出来。        

使用 QSettings 来读取配置，更换服务源
```cpp
void Widget::on_comboBox_server_currentIndexChanged(const QString &arg1)
{
    appinfoLoadThread.setServer(arg1); // 服务器信息更新
    if(configCanSave){
        ui->label_setting1->show();
        QSettings *setConfig=new QSettings(QDir::homePath()+"/.config/spark-store/config.ini",QSettings::IniFormat);
        setConfig->setValue("server/choose",arg1);
    }
}
```

使用 `QProcess` 来调用各种小文件下载、包安装卸载的命令。    

## 应用更新升级机制 


# 任务：将后端的三个安装替换为 apt-fast 

